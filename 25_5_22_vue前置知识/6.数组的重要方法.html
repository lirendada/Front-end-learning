<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        const arr = [11, 22, 33, 44]

        // 1. 添加：push()、unshift()
        const len1 = arr.push([55, 66], 77); // 尾部添加
        console.log(arr);
        console.log("length:" + len1);
        
        const len2 = arr.unshift(0); // 头部添加
        console.log(arr);
        console.log("length:" + len2);


        // 2. 删除：pop()、shift()
        arr.pop(); // 尾部删除
        console.log(arr);
        console.log("length:" + arr.length);
        
        arr.shift(); // 头部删除
        console.log(arr);
        console.log("length:" + arr.length);
        

        // 3. 任意位置添加或删除：splice(start_index, remove_count, add_item)，返回被删除的元素的数组
        // 3.1 删除下标为2的元素
        const remove_arr = arr.splice(2, 1);
        console.log(arr);
        console.log("length:" + arr.length);
        console.log(remove_arr);
        
        // 3.2 在下标为2处添加元素250
        arr.splice(2, 0, 250);
        console.log(arr);
        console.log("length:" + arr.length);


        // 4. 是否包含元素：includes(target, start_index)
        let result1 = arr.includes(250, 0);
        let result2 = arr.includes(250, 3);
        console.log(result1);
        console.log(result2);


        // 5. 遍历forEach
        // 5.1 for循环
        for(let i = 0; i < arr.length; ++i) {
            console.log(arr[i]);
        }

        // 5.2 forEach遍历
        arr.forEach((item, index) => {
            console.log(`item: ${item}, index: ${index}`);
        });


        // 6. 过滤filter()
        // 6.1 语法
        const filter_arr = arr.filter((item, index, array) => {
            return item > 25;
        });
        console.log(filter_arr);

        // 6.2 保留所有偶数
        const even_arr = arr.filter((item, index, array) => {
            return item % 2 === 0;
        })
        console.log(even_arr);
        

        // 7. 映射map()
        // 7.1 语法
        const mapped_arr = arr.map((item, index, array) => {
            if(Array.isArray(item)) {
                // 对数组内部每个元素也乘以2
                return item.map(subItem => subItem * 2);
            } else {
                return item * 2;
            }
        });
        console.log(mapped_arr);


        // 8. 检测每一个：every()
        // 8.1 语法
        const every_arr = arr.every((item, index, array) => {
            // 如果返回true，则所有元素都满足条件
            // 如果返回false，则至少有一个元素不满足条件
            return item > 0; // 检测每个元素是否大于0
        });
        console.log(every_arr);

        // 8.2 判断arr中的元素是否都是奇数
        const allOdd = arr.every(item => {
            if(Array.isArray(item)) {
                // 对数组内部每个元素进行判断
                return item.every(subItem => subItem % 2 !== 0);
            } else {
                return item % 2 !== 0;
            }
        });
        console.log(allOdd); // 输出true或false


        // 9. 汇总：reduce()
        // 对arr求和
        let sum = 0;
        arr.forEach(item => {
            sum += item;
        })
        console.log(sum);

        // 9.1 语法
        const result = arr.reduce((accumulator, currentValue, currentIndex, array) => {
            // 累加器：accumulator
            // 当前值：currentValue
            // 当前索引：currentIndex
            // 数组本身：array
            return accumulator + currentValue;
        }, 0); // 初始值为0
        console.log(result);

        // 商品列表数组
        const goodsList = [
            { id: 1, name: '篮球', num: 1 },
            { id: 2, name: '玩具', num: 3 },
            { id: 3, name: '书籍', num: 2 }
        ]
        // 求总数量
        const totalNum = goodsList.reduce((accumulator, currentValue) => {
            return accumulator + currentValue['num'];
        }, 0);
        console.log(totalNum); // 输出6

        
    </script>
</body>
</html>